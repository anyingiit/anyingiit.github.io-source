---
title: 使用Charles获取网易云网页端以及手机端的API地址
date: 2019-08-16 21:41:42
tags:
typora-root-url: 使用Charles获取网易云网页端以及手机端的API地址
---

# 获取网页端网页云API地址

## 启动Charles代理

![](https://oss.trustme.anyingiit.com/images/20190820154655.png)

## 捕获目标

### 刷新页面

![](https://oss.trustme.anyingiit.com/images/20190820154712.png)

### 捕获目标!

![](https://oss.trustme.anyingiit.com/images/20190820154703.png)

通过信息可以得出,网页端网易云音乐使用的接口为HTTPS,所以我们的下一步就是配置SSL,以捕获加密数据

## 配置SSL

### 安装Charles SSL证书

![](https://oss.trustme.anyingiit.com/images/20190820154651.png)

![](https://oss.trustme.anyingiit.com/images/20190820154702.png)

* 这里的过程非常容易,下一步即可,不做过多赘述

### 在Charles启用对`https://music.163.com`的SSL代理

![](https://oss.trustme.anyingiit.com/images/20190820154701.png)

#### 对目标进行锁定

计算机在无时不刻发送数据,导致我们的Charles非常清爽,所以我们需要锁定目标

![](https://oss.trustme.anyingiit.com/images/20190820154700.png)

![](https://oss.trustme.anyingiit.com/images/20190820154650.png)

是不是清爽了许多!!

## 正式开始

* 在刷新网易云音乐页面后提示页面不安全,可能被攻击.嗯,从某种意义来说就是这样,我们不管他

![](https://oss.trustme.anyingiit.com/images/20190820154654.png)

* 观察api请求结构

![](https://oss.trustme.anyingiit.com/images/20190820154659.png)

* 锁定目标

![](https://oss.trustme.anyingiit.com/images/20190820154710.png)

## 小结

获取音乐本体URL的接口

```
https://music.163.com/weapi/song/enhance/player/url/v1?csrf_token=
```

请求参数

```
params:HfkwofZ8nsUxNEBLvPBxyrliRdcVJ+zP2fsiziSHhAN5OHPlQrjJPlMvBdv75FWMVyPL59fnorFkThrphcqrmICEgJEXzOUgop6FbwGaCPtJxmh9raoYNuUMxBqNpu9PD15IXmaiVxmhTjg6AnSfHg==
encSecKey:5ef720b71a5307a47eb34a7ec3e1862f75d355a673d3a452354c168db11869d2e65d09e1a098f62a30cec61092622b62aa8ecff3d3b5ac556ef76eaaecd7776bb71b2a278852e9f5665212feefb094a573f0215ee9d44fc909fef5e5cefdd5bb795d4023f0d543f8763337fe10e9fbe66f650fe620d29e440cc0afb8f0f7f5ad
```

### 验证

![](https://oss.trustme.anyingiit.com/images/20190820154707.png)

# 获取安卓网易云APP-API地址

## 配置代理

![](https://oss.trustme.anyingiit.com/images/20190820154656.png)

* 将手机置于和pc同一局域网下

![](https://oss.trustme.anyingiit.com/images/20190820154714.png)

![](https://oss.trustme.anyingiit.com/images/20190820154652.png)

## 安装证书

![](https://oss.trustme.anyingiit.com/images/20190820154657.png)

![](https://oss.trustme.anyingiit.com/images/20190820154653.png)



![](https://oss.trustme.anyingiit.com/images/20190820154711.jpg)

![](https://oss.trustme.anyingiit.com/images/20190820154713.jpg)

![](https://oss.trustme.anyingiit.com/images/20190820154709.jpg)

√Done!

## 正式开始

在刷新几次页面后观察列表,发现`interface.music.163.com`的接口结构和刚刚网页端网易云音乐的目标接口接口及其相似

![](https://oss.trustme.anyingiit.com/images/20190820154708.png)

几次尝试之后锁定了`http://interface3.music.163.com/eapi/song/enhance/player/url/v1?ids=%5B%22536622304_0%22%2C%22537470060_0%22%5D&level=exhigh&encodeType=aac`

![](https://oss.trustme.anyingiit.com/images/20190820154704.png)

不过这以大坨是什么东西..

![](https://oss.trustme.anyingiit.com/images/20190820154658.png)

内容编码格式为gzip,难道和这个有关?

![](https://oss.trustme.anyingiit.com/images/20190820154705.png)

![](https://oss.trustme.anyingiit.com/images/20190820154706.png)

## 小结

API本体

```
http://interface3.music.163.com/eapi/song/enhance/player/url/v1?ids=%5B%22536622304_0%22%2C%22537470060_0%22%5D&level=exhigh&encodeType=aac
```

请求参数

````
params=FA90B329E9614F79E79598F37DC2EDB487F00D1BC4C9B24CD57E6C318B90735683B31EBCEA2406A063CEA88FC25A3AF31F5AE062C154E354DE501E2FABA37F00CD5764981144AC2E56A8AC59D6F4133F6F4461CDA1CF73753380189AA21E8AB50A123DFC9CAB93F40C935CF84CD10D6DF5B2D7DA80ADA61A7F7F5A2F3A608221553A5F9DB5944F3CC013987127041C75588E1634CC12A893E605B06325FC92A516D1E588E00C3DCE6E0A53EB173D39F97CA037707AB40CCF7F93044ACBD8235C03ADE6CC06114148244F5C19DA7905873D4997C8C78628031375F49E8B68CB93327B9206F391DC49E69F1672B30605CD4F5B95AC55800D593466BE116C870A0E8AB62C7BDC11091FF435E59684EB7E277DB6812B495A61571B7CAF8C54EF7456881F67FE66B6FCCADFF268EDD4A4C4DB1517E05A2D5EC0E61A2039C1E79CD007315D001712F055117E10CD02B8438A56BABDB0E88EAD74FA6873025EFE3BF1EB4111ED282DB085F3DE47325A84ADDC879815CD43514120820C821D1648CB1DE16446514C72161B30F1B77E72CC011770CF5B8DD0C0B7FD127C526211D4B3FF74DCB5494E0ABC6A2DB7AA5211661612491D569742CDEF98F112244CAB8EDAA831D0453954A3B7FFC43C1D2CFA21DA4D82C89D8DD2D46E5E0BA1FBE8DF6E956BF54894D9CF7EC29C4A84CF5D4AF27D1B758048AF9D3CE4BF3189ABEBB0E7015B60B460EFFBD617C78448B4470C6B53A198529E2E9860A3E4012D6419579E81686A6C997E67CE2E4C5E7256D5C9B731C1149D7E72EBF4E414922DF6A739ED34ED7F6EEC5F8B757E2D1C6C187F613118ED4386870F333EFF03967845824CEB3390B7D8BAA052F1854D973C4F33312C905A8F593736B9D1B3B7776053D997B7247F02D8123DF0F56A7C53FC2BFBE9BBBA376D6343AB55D372C515C620A1EFCC126D18
````

根据返回的这一大坨来看,应该不是服务器报错,但是我们看到的依然是乱码,基本上可以判定该接口返回的数据为加密数据.

### 验证

![](https://oss.trustme.anyingiit.com/images/20190820154706.png)

# 总结

## 网页端API接口

```
https://music.163.com/weapi/song/enhance/player/url/v1?csrf_token=
```

请求参数

```
params:HfkwofZ8nsUxNEBLvPBxyrliRdcVJ+zP2fsiziSHhAN5OHPlQrjJPlMvBdv75FWMVyPL59fnorFkThrphcqrmICEgJEXzOUgop6FbwGaCPtJxmh9raoYNuUMxBqNpu9PD15IXmaiVxmhTjg6AnSfHg==
encSecKey:5ef720b71a5307a47eb34a7ec3e1862f75d355a673d3a452354c168db11869d2e65d09e1a098f62a30cec61092622b62aa8ecff3d3b5ac556ef76eaaecd7776bb71b2a278852e9f5665212feefb094a573f0215ee9d44fc909fef5e5cefdd5bb795d4023f0d543f8763337fe10e9fbe66f650fe620d29e440cc0afb8f0f7f5ad
```

## 移动端API接口

API本体

```
http://interface3.music.163.com/eapi/song/enhance/player/url/v1?ids=%5B%22536622304_0%22%2C%22537470060_0%22%5D&level=exhigh&encodeType=aac
```

请求参数

```
params=FA90B329E9614F79E79598F37DC2EDB487F00D1BC4C9B24CD57E6C318B90735683B31EBCEA2406A063CEA88FC25A3AF31F5AE062C154E354DE501E2FABA37F00CD5764981144AC2E56A8AC59D6F4133F6F4461CDA1CF73753380189AA21E8AB50A123DFC9CAB93F40C935CF84CD10D6DF5B2D7DA80ADA61A7F7F5A2F3A608221553A5F9DB5944F3CC013987127041C75588E1634CC12A893E605B06325FC92A516D1E588E00C3DCE6E0A53EB173D39F97CA037707AB40CCF7F93044ACBD8235C03ADE6CC06114148244F5C19DA7905873D4997C8C78628031375F49E8B68CB93327B9206F391DC49E69F1672B30605CD4F5B95AC55800D593466BE116C870A0E8AB62C7BDC11091FF435E59684EB7E277DB6812B495A61571B7CAF8C54EF7456881F67FE66B6FCCADFF268EDD4A4C4DB1517E05A2D5EC0E61A2039C1E79CD007315D001712F055117E10CD02B8438A56BABDB0E88EAD74FA6873025EFE3BF1EB4111ED282DB085F3DE47325A84ADDC879815CD43514120820C821D1648CB1DE16446514C72161B30F1B77E72CC011770CF5B8DD0C0B7FD127C526211D4B3FF74DCB5494E0ABC6A2DB7AA5211661612491D569742CDEF98F112244CAB8EDAA831D0453954A3B7FFC43C1D2CFA21DA4D82C89D8DD2D46E5E0BA1FBE8DF6E956BF54894D9CF7EC29C4A84CF5D4AF27D1B758048AF9D3CE4BF3189ABEBB0E7015B60B460EFFBD617C78448B4470C6B53A198529E2E9860A3E4012D6419579E81686A6C997E67CE2E4C5E7256D5C9B731C1149D7E72EBF4E414922DF6A739ED34ED7F6EEC5F8B757E2D1C6C187F613118ED4386870F333EFF03967845824CEB3390B7D8BAA052F1854D973C4F33312C905A8F593736B9D1B3B7776053D997B7247F02D8123DF0F56A7C53FC2BFBE9BBBA376D6343AB55D372C515C620A1EFCC126D18
```



